citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
blogdown::serve_site()
blogdown::serve_site()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
url <- "http://www.glfc.org/commercial/commercial.xls"
destfile <- paste0("./", basename(url))
#download.file(url = url, destfile = destfile, method = "curl")
df <- readxl::read_xls(path = destfile,
sheet = "Michigan")
colnames(df) <- tolower(colnames(df))
colnames(df) <- gsub("\\(|\\)|\\.", "", colnames(df))
colnames(df) <- gsub(" ", "_", colnames(df))
#
# surface area
df$sa <- 31700
# lbs/per acre
df$lbs_per_acre <- round((df$us_total / df$sa), 2)
#forcats
df$species <- df$species %>% forcats::fct_lump(n = 5)
#group by new factor categories
df.1 <-
df %>%
select(year, lake, species, lbs_per_acre) %>%
filter(year >= 1920) %>%
group_by(year, species) %>%
summarize(total = sum(lbs_per_acre))
#reorder factor variable to frequency latest year
df.1 %>% dplyr::filter(year == 2015) %>% arrange(-total)
df.1$species <- factor(df.1$species, levels = c("Lake Whitefish", "Lake Trout", "Yellow Perch", "Suckers", "Walleye", "Other"))
# plot
p <- ggplot(df.1, aes(year, total, group = species, colour = species))
p <- p + geom_line()
p
# system & package info
options(width = 120)
session_info()
citr:::insert_citation()
blogdown::serve_site()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
url <- "http://www.glfc.org/commercial/commercial.xls"
destfile <- paste0("./", basename(url))
#download.file(url = url, destfile = destfile, method = "curl")
df <- readxl::read_xls(path = destfile,
sheet = "Michigan")
colnames(df) <- tolower(colnames(df))
colnames(df) <- gsub("\\(|\\)|\\.", "", colnames(df))
colnames(df) <- gsub(" ", "_", colnames(df))
#
# surface area
df$sa <- 31700
# lbs/per acre
df$lbs_per_acre <- round((df$us_total / df$sa), 2)
#forcats
df$species <- df$species %>% forcats::fct_lump(n = 5)
#group by new factor categories
df.1 <-
df %>%
select(year, lake, species, lbs_per_acre) %>%
filter(year >= 1920) %>%
group_by(year, species) %>%
summarize(total = sum(lbs_per_acre))
#reorder factor variable to frequency latest year
df.1 %>% dplyr::filter(year == 2015) %>% arrange(-total)
df.1$species <- factor(df.1$species, levels = c("Lake Whitefish", "Lake Trout", "Yellow Perch", "Suckers", "Walleye", "Other"))
# plot
p <- ggplot(df.1, aes(year, total, group = species, colour = species))
p <- p + geom_line()
p
# system & package info
options(width = 120)
session_info()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
citr:::insert_citation()
stop_server()
citr:::insert_citation()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
url <- "http://www.glfc.org/commercial/commercial.xls"
destfile <- paste0("./", basename(url))
#download.file(url = url, destfile = destfile, method = "curl")
df <- readxl::read_xls(path = destfile,
sheet = "Michigan")
colnames(df) <- tolower(colnames(df))
colnames(df) <- gsub("\\(|\\)|\\.", "", colnames(df))
colnames(df) <- gsub(" ", "_", colnames(df))
#
# surface area
df$sa <- 31700
# lbs/per acre
df$lbs_per_acre <- round((df$us_total / df$sa), 2)
#forcats
df$species <- df$species %>% forcats::fct_lump(n = 5)
#group by new factor categories
df.1 <-
df %>%
select(year, lake, species, lbs_per_acre) %>%
filter(year >= 1920) %>%
group_by(year, species) %>%
summarize(total = sum(lbs_per_acre))
#reorder factor variable to frequency latest year
df.1 %>% dplyr::filter(year == 2015) %>% arrange(-total)
df.1$species <- factor(df.1$species, levels = c("Lake Whitefish", "Lake Trout", "Yellow Perch", "Suckers", "Walleye", "Other"))
# plot
p <- ggplot(df.1, aes(year, total, group = species, colour = species))
p <- p + geom_line()
p
knitr::include_graphics("./trophic_state_index.png")
# system & package info
options(width = 120)
session_info()
citr:::insert_citation()
citr:::insert_citation()
serve_site()
stop_server
stop_server()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
url <- "http://www.glfc.org/commercial/commercial.xls"
destfile <- paste0("./", basename(url))
#download.file(url = url, destfile = destfile, method = "curl")
df <- readxl::read_xls(path = destfile,
sheet = "Michigan")
colnames(df) <- tolower(colnames(df))
colnames(df) <- gsub("\\(|\\)|\\.", "", colnames(df))
colnames(df) <- gsub(" ", "_", colnames(df))
#
# surface area
df$sa <- 31700
# lbs/per acre
df$lbs_per_acre <- round((df$us_total / df$sa), 2)
#forcats
df$species <- df$species %>% forcats::fct_lump(n = 5)
#group by new factor categories
df.1 <-
df %>%
select(year, lake, species, lbs_per_acre) %>%
filter(year >= 1920) %>%
group_by(year, species) %>%
summarize(total = sum(lbs_per_acre))
#reorder factor variable to frequency latest year
df.1 %>% dplyr::filter(year == 2015) %>% arrange(-total)
df.1$species <- factor(df.1$species, levels = c("Lake Whitefish", "Lake Trout", "Yellow Perch", "Suckers", "Walleye", "Other"))
# plot
p <- ggplot(df.1, aes(year, total, group = species, colour = species))
p <- p + geom_line()
p
knitr::include_graphics("./trophic_state_index.png")
# system & package info
options(width = 120)
session_info()
serve_site()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
url <- "http://www.glfc.org/commercial/commercial.xls"
destfile <- paste0("./", basename(url))
#download.file(url = url, destfile = destfile, method = "curl")
df <- readxl::read_xls(path = destfile,
sheet = "Michigan")
colnames(df) <- tolower(colnames(df))
colnames(df) <- gsub("\\(|\\)|\\.", "", colnames(df))
colnames(df) <- gsub(" ", "_", colnames(df))
#
# surface area
df$sa <- 31700
# lbs/per acre
df$lbs_per_acre <- round((df$us_total / df$sa), 2)
#forcats
df$species <- df$species %>% forcats::fct_lump(n = 5)
#group by new factor categories
df.1 <-
df %>%
select(year, lake, species, lbs_per_acre) %>%
filter(year >= 1920) %>%
group_by(year, species) %>%
summarize(total = sum(lbs_per_acre))
#reorder factor variable to frequency latest year
df.1 %>% dplyr::filter(year == 2015) %>% arrange(-total)
df.1$species <- factor(df.1$species, levels = c("Lake Whitefish", "Lake Trout", "Yellow Perch", "Suckers", "Walleye", "Other"))
# plot
p <- ggplot(df.1, aes(year, total, group = species, colour = species))
p <- p + geom_line()
p
knitr::include_graphics("./trophic_state_index.png")
# system & package info
options(width = 120)
session_info()
citr:::insert_citation()
list.files("~/Dropbox/public/datasets", full.names = T)
url <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
df %>%
filter(year == max(year)) %>%
arrange(grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
library(magrittr)
library(magrittr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
df$grand_total <- df$grand_total * 1000
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10)
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total))
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total). .groups = "year")
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total), .groups = "year")
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total), .groups = year)
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total))
View(df.1)
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total, na.rm = T))
View(df.1)
p <- ggplot(df.1, aes(year, catch, group = lake, color = lake)
df.1 <-
df.1 <-
df %>%
group_by(year, lake) %>%
summarize(catch = sum(grand_total, na.rm = T))
p <- ggplot(df.1, aes(year, catch, group = lake, color = lake))
library(ggplot2)
p <- ggplot(df.1, aes(year, catch, group = lake, color = lake))
p <- p + geom_line()
p
df.1 <-
df %>%
group_by(year, lake, sa) %>%
summarize(catch = sum(grand_total, na.rm = T))
p <- ggplot(df.1, aes(year, catch, group = lake, color = lake))
p <- p + geom_line()
p
View(df)
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake, sa) %>%
summarize(catch = sum(grand_total))
library(ggplot2)
p <- ggplot(df.1, aes(year, catch, group = lake, color = lake))
p <- p + geom_line()
p
View(df.1)
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake, sa) %>%
summarize(prod = grand_total/sa)
library(ggplot2)
p <- ggplot(df.1, aes(year, prod, group = lake, color = lake))
p <- p + geom_line()
p
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake, sa, species) %>%
summarize(prod = grand_total/sa)
library(ggplot2)
p <- ggplot(df.1, aes(year, prod, group = lake, color = lake))
p <- p + geom_line()
p
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(prod = grand_total/sa)
library(ggplot2)
p <- ggplot(df.1, aes(year, prod, group = lake, color = lake))
p <- p + geom_line()
p
View(df.1)
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
View(df.1)
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
mutate(total = sum(grand_total))
View(df.1)
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
unique(df$sa)
table(df$sa)
?table
table(df$sa, useNA = "always")
