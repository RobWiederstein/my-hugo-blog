)
files <- c("./2021-03-01-uscg-dist-9-light-list-partial.csv", "../public_data/2021-03-01-uscg-dist-9-light-list-partial.csv")
lapply(files, function(x) {
readr::write_csv(x = df, file = x)
}
)
files <- c("./2021-03-01-uscg-dist-9-light-list-partial.csv", "../public_data/2021-03-01-uscg-dist-9-light-list-partial.csv")
lapply(files, function(x) {
readr::write_csv(x = df, file = x)
}
)
setwd("../blogdown-default")
?fread
setwd("../lighthouses")
x <- c("tidyverse", "data.table", "leaflet")
lapply(x, library, character.only = T)
rm(x)
input <- "./lights1.csv"
df <- as_tibble(data.table::fread(input = input))
colnames(df) <- gsub("_x0020|_x0028|_x0029_|_x002F", "", colnames(df))
colnames(df) <- gsub("__", "_", colnames(df))
colnames(df) <- gsub("Position_", "", colnames(df))
colnames(df) <- tolower(colnames(df))
df[df == ""] <- NA
Amelia::missmap(df)
df <- df[, -grep("xref", colnames(df))]
df <- df[, -grep("morse", colnames(df))]
df <- df[, -grep("location", colnames(df))]
df <- df[, -grep("both_night", colnames(df))]
df <- df[, -grep("remarks", colnames(df))]
df <- df[, -grep("height_meters", colnames(df))]
df <- df[which(is.na(df$longitude) == F), ]
df <- df[which(is.na(df$latitude) == F), ]
Amelia::missmap(df)
df <- df[which(is.na(df$structure) == F), ]
Amelia::missmap(df)
# keep obs w/ range data
keep.rows <- which(is.na(df$range) == F)
df <- df[keep.rows, ]
Amelia::missmap(df)
df <- df[-grep("Buoy", df$aid_name), ]
Amelia::missmap(df)
df$dwelling <- 0
df$dwelling[grep("dwelling", df$structure)] <- 1
df$dwelling <- factor(df$dwelling, labels = c("no_dwelling", "dwelling"))
df$q_range <- ggplot2::cut_interval(df$range, n = 5)
Amelia::missmap(df)
sort(apply(df, 2, function(x) length(unique(x))))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p
df$latitude <- gsub("N", "", df$latitude)
df$longitude <- gsub("W", "", df$longitude)
angle2dec <- function(angle) {
angle <- as.character(angle)
x <- do.call(rbind, strsplit(angle, split='-'))
x <- apply(x, 1L, function(y) {
y <- as.numeric(y)
y[1] + y[2]/60 + y[3]/3600
})
return(x)
}
df$latitude <- angle2dec(df$latitude)
df$longitude <- angle2dec(df$longitude)
df$longitude <- df$longitude * -1
#add color to buoy factor
dwellingCol <- colorFactor(palette = c("#FFC20A", "#0C7BDC"), df$dwelling)
library(leaflet)
m <- leaflet() %>%
addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -86.83, lat = 44.641, zoom = 9) %>%
addCircleMarkers(lng = df$longitude,
lat = df$latitude,
color = dwellingCol(df$dwelling),
radius = df$range,
popup = paste("Aid name: ", df$aid_name, "<br>",
"Structure: ", df$structure, "<br>",
"Characteristic: ", df$characteristic, "<br>",
"Height: ", df$height, "<br>",
"Range: ", df$range, "<br>")
)
m
library(ggplot2)
p <- ggplot(df, aes(height, range, colour = both_night_day, group = both_night_day))
p <- p + geom_point()
p <- p + geom_smooth()
p
files <- c("./2021-03-01-uscg-dist-9-light-list-partial.csv", "~/Dropbox/public/datasets/2021-03-01-uscg-dist-9-light-list-partial.csv")
lapply(files, function(x) {
readr::write_csv(x = df, file = x)
}
)
setwd("../blogdown-default")
input <- "2021-03-01-uscg-dist-9-light-list-partial.csv"
input <- "2021-03-01-uscg-dist-9-light-list-partial.csv"
df <- as_tibble(data.table::fread(input = input))
input <- "https://dl.dropbox.com/s/lpyt4bxerzpao1b/2021-03-01-uscg-dist-9-light-list-partial.csv?dl=0"
df <- as_tibble(data.table::fread(input = input))
#datasets hosted in dropbox
input <- "https://dl.dropbox.com/s/lpyt4bxerzpao1b/2021-03-01-uscg-dist-9-light-list-partial.csv?dl=0"
df <- as_tibble(data.table::fread(input = input))
df$dwelling <- factor(df$dwelling, labels = c("yes", "no"))
#datasets hosted in dropbox
input <- "https://dl.dropbox.com/s/lpyt4bxerzpao1b/2021-03-01-uscg-dist-9-light-list-partial.csv?dl=0"
df <- as_tibble(data.table::fread(input = input))
df$dwelling <- factor(df$dwelling, labels = c("yes", "no"))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + xlim(0, 200)
p
p <- ggplot(df, aes(height, range)
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + xlim(0, 200)
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + xlim(0, 200)
p
p <- p + scale_x_continuous(name = "height")
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + xlim(0, 200)
p <- p + scale_x_continuous(name = "height")
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height"
xlim = (0, 200))
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
xlim = (0, 200))
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
xlim = c(0, 200)
)
?scale_x_continuous
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + theme(axis.title = element_text(), axis.title.x = element_blank()) + ylab('Something')
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + theme(axis.title = element_text() + xlab('height') + ylab('range (nm)')
p
p <- ggplot(df, aes(height, range))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + theme(axis.title = element_text()) + xlab('height') + ylab('range (nm)')
p
?cor
cor(df$height, df$range, method = pearson)
cor(df$height, df$range, method = "pearson")
cor(df$height, df$range)
df$height
df$range
str(df)
colnames(df)
cor([, 8], [, 9])
cor(df[, 8], df[, 9])
cor(1:10, 2:11)
with(df, cor(height, range()))
with(df, cor(height, range))
with(df, cor(height, range, na.rm = T))
with(df, cor(height, range, na.rm = T))
table(df$dwelling)
range(df$range)
median(df$range)
nrow(df)
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + theme(axis.title = element_text()) + xlab('height') + ylab('range (nm)')
p
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
## see http://lcolladotor.github.io/2018/03/08/blogdown-archetype-template/#.YEOC-C2cZOR
## Load frequently used packages for blog posts
x <- c(
'devtools', #for session info
'ggthemes', #for plots
'knitcitations',
'BiocStyle',
'blogdown'
)
lapply(x, library, character.only = T)
## Load knitcitations with a clean bibliography
cleanbib()
cite_options(hyperlink = 'to.doc', citation_format = 'text', style = 'html')
bib <- c(
'BiocStyle' = citation('BiocStyle'),
'blogdown' = citation('blogdown')[2],
'devtools' = citation('devtools'),
'knitcitations' = citation('knitcitations'),
'leaflet' = citation('leaflet')
)
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
x <- c("tidyverse", "leaflet", "data.table", "tibble", "htmlwidgets", "leaflet.providers")
lapply(x, library, character.only = T)
#datasets hosted in dropbox
input <- "https://dl.dropbox.com/s/lpyt4bxerzpao1b/2021-03-01-uscg-dist-9-light-list-partial.csv?dl=0"
df <- as_tibble(data.table::fread(input = input))
df$dwelling <- factor(df$dwelling, labels = c("yes", "no"))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p
dwellingCol <- colorFactor(palette = c("#FFC20A", "#0C7BDC"), df$dwelling)
library(leaflet)
m <- leaflet() %>%
#addProviderTiles(providers$CartoDB.Positron) %>%
addTiles()%>%
setView(lng = -86.83, lat = 44.641, zoom = 8) %>%
addCircleMarkers(lng = df$longitude,
lat = df$latitude,
color = dwellingCol(df$dwelling),
radius = df$range,
popup = paste("Aid name: ", df$aid_name, "<br>",
"Structure: ", df$structure, "<br>",
"Characteristic: ", df$characteristic, "<br>",
"Height: ", df$height, "<br>",
"Range: ", df$range, "<br>")
)
m
## Print bibliography
bibliography(style = 'html')
## Reproducibility info
options(width = 120)
session_info()
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p + scale_color_manual(values = cbPalette)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + scale_color_manual(values = cbPalette)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + scale_color_manual(values = cbPalette)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p <- p + theme_fivethirtyeight()
p
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + scale_color_manual(values = cbPalette)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p
citation('BiocStyle')
`r Biocpkg('BiocStyle')`
Biocpkg('BiocStyle')
citep(bib[['BiocStyle']])
## see http://lcolladotor.github.io/2018/03/08/blogdown-archetype-template/#.YEOC-C2cZOR
## Load frequently used packages for blog posts
x <- c(
'devtools', #for session info
'ggthemes', #for plots
'knitcitations',
'BiocStyle',
'blogdown'
)
lapply(x, library, character.only = T)
## Load knitcitations with a clean bibliography
cleanbib()
cite_options(hyperlink = 'to.doc', citation_format = 'text', style = 'html')
bib <- c(
'BiocStyle' = citation('BiocStyle'),
'blogdown' = citation('blogdown')[2],
'devtools' = citation('devtools'),
'knitcitations' = citation('knitcitations'),
'leaflet' = citation('leaflet')
)
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
x <- c("tidyverse", "leaflet", "data.table", "tibble", "htmlwidgets", "leaflet.providers")
lapply(x, library, character.only = T)
#datasets hosted in dropbox
input <- "https://dl.dropbox.com/s/lpyt4bxerzpao1b/2021-03-01-uscg-dist-9-light-list-partial.csv?dl=0"
df <- as_tibble(data.table::fread(input = input))
df$dwelling <- factor(df$dwelling, labels = c("yes", "no"))
p <- ggplot(df, aes(height, range, group = dwelling, color = dwelling))
p <- p + geom_point()
p <- p + ggtitle("USCG Nav. Aids -- Buoys Omitted")
p <- p + geom_smooth()
p <- p + scale_x_continuous(name = "height",
limits = c(0, 200)
)
p <- p + scale_color_manual(values = cbPalette)
p <- p + theme(axis.title = element_text()) + xlab('height (ft)') + ylab('range (nm)')
p
dwellingCol <- colorFactor(palette = c("#FFC20A", "#0C7BDC"), df$dwelling)
library(leaflet)
m <- leaflet() %>%
#addProviderTiles(providers$CartoDB.Positron) %>%
addTiles()%>%
setView(lng = -86.83, lat = 44.641, zoom = 8) %>%
addCircleMarkers(lng = df$longitude,
lat = df$latitude,
color = dwellingCol(df$dwelling),
radius = df$range,
popup = paste("Aid name: ", df$aid_name, "<br>",
"Structure: ", df$structure, "<br>",
"Characteristic: ", df$characteristic, "<br>",
"Height: ", df$height, "<br>",
"Range: ", df$range, "<br>")
)
m
## Print bibliography
bibliography(style = 'html')
## Reproducibility info
options(width = 120)
session_info()
?knitcitations
?citep
?CRANpkg
?bibliography
cite("R")
file.create("./content/post/2021-03-07-michigan-lighthouses/biblio.bib")
file.edit("./content/post/2021-03-07-michigan-lighthouses/biblio.bib")
?knitr::write_bib
?citeproc
?Citeproc
bib[[1]]
bib
citation('BiocStyle')
citation('R')
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), "biblio.bib", width = 60)
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), width = 60)
cite("stringr")
# or include all used in the post
knitr::write_bib(.packages(), "packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "./packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "../packages.bib")
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), "", width = 60)
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), "/content/post/packages.bib", width = 60)
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), "packages.bib", width = 60)
# the second argument can be a .bib file
knitr::write_bib(c("knitr", "stringr"), "packages.bib", width = 60)
citr:::insert_citation()
citr:::insert_citation()
# or include all used in the post
knitr::write_bib(.packages(), "packages.bib")
## see http://lcolladotor.github.io/2018/03/08/blogdown-archetype-template/#.YEOC-C2cZOR
## Load frequently used packages for blog posts
x <- c(
'devtools', #for session info
'ggthemes', #for plots
'knitcitations',
'BiocStyle',
'blogdown',
'knitr'
)
lapply(x, library, character.only = T)
## Load knitcitations with a clean bibliography
cleanbib()
cite_options(hyperlink = 'to.doc', citation_format = 'text', style = 'html')
bib <- c(
'BiocStyle' = citation('BiocStyle'),
'blogdown' = citation('blogdown')[2],
'devtools' = citation('devtools'),
'knitcitations' = citation('knitcitations'),
'leaflet' = citation('leaflet')
)
# or include all used in the post
knitr::write_bib(.packages(), "packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "//.packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "../packages.bib")
# or include all used in the post
knitr::write_bib(.packages(), "./packages.bib")
citr:::insert_citation()
stop_server
stop_server()
serve_site()
build_site(build_rmd = T)
citr:::insert_citation()
citr:::insert_citation()
stop_server()
serve_site()
blogdown:::new_post_addin()
serve_site
blogdown::serve_site()
