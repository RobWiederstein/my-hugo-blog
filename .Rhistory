df.1$lbs_per_acre <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Claire", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_acre, color = lake))
p <- p + geom_line()
p <- p + scale_y_continuous(breaks = c(0, 2000, 4000, 6000),
labels = c("0", "2k", "4k", "6k")
)
p <- p + facet_grid(rows = vars(lake))
p <- p + ggtitle("Prod. Pounds / Acre")
p <-  p + theme(legend. position = "none")
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_acre <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Claire", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_acre, color = lake))
p <- p + geom_line()
p <- p + scale_y_continuous(breaks = c(0, 2000, 4000, 6000),
labels = c("0", "2k", "4k", "6k")
)
p <- p + facet_grid(rows = vars(lake))
p <- p + ggtitle("Prod. Pounds / Acre")
p <-  p + theme(legend.position = "none")
p
?bquote
?rmarkdown::fig.height
?ggtitle
paste("lbs / mi", ^2)
ring(A)^2)
paste("x axis ", ring(A)^2))
paste("x axis ", ring(A)^2)
expression(paste("x axis ", ring(A)^2))
?expression?xpression
?expression
length(ex1 <- expression(1 + 0:9))
ex1
expression(Concentration~"("*mg~L^{-1}*")")
eval(ex1)
ex1
?ggthemes::theme_fivethirtyeight
?theme
setwd("../")
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
df$grand_total <- df$grand_total * 1000
knitr::include_graphics("./trophic_state_index.png")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_acre <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_acre, color = lake))
p <- p + geom_line(lwd = 1)
p <- p + scale_y_continuous(name = "",
breaks = c(0, 2000, 4000, 6000),
labels = c("0", "2k", "4k", "6k")
)
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
# system & package info
options(width = 120)
session_info()
blogdown::serve_site()
View(df)
View(df.1)
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_graphics("./trophic_state_index.png")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_acre <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_acre, color = lake))
p <- p + geom_line(lwd = 1)
p <- p + scale_y_continuous(name = "",
breaks = c(0, 2000, 4000, 6000),
labels = c("0", "2k", "4k", "6k")
)
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
# system & package info
options(width = 120)
session_info()
blogdown::serve_site()
library(magrittr)
library(dplyr)
df.2 <-
df %>%
dplyr::filter(year == max(year)) %>%
dplyr::filter(lake == "Michigan") %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10) #%>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
View(df.2)
colnames(df)
blogdown::serve_site()
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_graphics("./great-lakes-system-profile.png")
knitr::include_graphics("./trophic_state_index.png")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_acre <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_acre, color = lake))
p <- p + geom_line(lwd = 1)
p <- p + scale_y_continuous(name = "",
breaks = c(0, 2000, 4000, 6000),
labels = c("0", "2k", "4k", "6k")
)
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
# system & package info
options(width = 120)
session_info()
df.1 <-
df %>%
na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_sq_mi <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_sq_mi, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
View(df.1)
table(df.1$lake)
table(df.1$lake, df.1$year)
df.1 %>% filter(lake == "Michigan")
df.1 %>% filter(lake == "Michigan" & year = 2015)
df.1 %>% filter(lake == "Michigan" & year == 2015)
df.1 <-
df %>%
#na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_sq_mi <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_sq_mi, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
df.1 <-
df %>%
#na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total, na.rm = T))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_sq_mi <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_sq_mi, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
?knitr::include_app
blogdown::serve_site()
blogdown::serve_site()
