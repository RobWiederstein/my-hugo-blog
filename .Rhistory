tidyr::pivot_longer(`2014-01`:`2021-09`, names_to = "date", values_to = "rent") |>
mutate(date = paste0(date, "-01")) |>
mutate(date = as.Date(date, format = "%Y-%m-%d")) |>
mutate(RegionName == gsub("-Long Beach-Anaheim",
"",
RegionName)
)
unique(df.c$RegionName)
df.c <-
df |>
dplyr::filter(SizeRank %in% c(0:6)) |>
tidyr::pivot_longer(`2014-01`:`2021-09`, names_to = "date", values_to = "rent") |>
mutate(date = paste0(date, "-01")) |>
mutate(date = as.Date(date, format = "%Y-%m-%d")) |>
mutate(RegionName = gsub("-Long Beach-Anaheim",
"",
RegionName)
)
unique(df.c$RegionName)
df.c <-
df |>
dplyr::filter(SizeRank %in% c(0:6)) |>
tidyr::pivot_longer(`2014-01`:`2021-09`, names_to = "date", values_to = "rent") |>
mutate(date = paste0(date, "-01")) |>
mutate(date = as.Date(date, format = "%Y-%m-%d")) |>
mutate(RegionName = gsub("-Long Beach-Anaheim",
"",
RegionName)
)|>
mutate(RegionName = gsub("-Fort Worth", "", RegionName))
unique(df.c$RegionName)
p <- ggplot2::ggplot(df.c, aes(date, rent, color = RegionName)) +
geom_line() +
scale_y_continuous(limits = c(1000, 2000))
plotly::ggplotly(p)
df <- readr::read_csv(file = "https://files.zillowstatic.com/research/public_csvs/invt_fs/Metro_invt_fs_uc_sfrcondo_sm_month.csv?t=1636157987")
View(df)
unique(df$RegionName)
df.c <-
df |>
dplyr::filter(grepl("Chicago", RegionName))
df.c <-
df |>
dplyr::filter(grepl("Chicago", RegionName)) |>
tidyr::pivot_longer(`2018-01-31`:`2021-09-30`,
names_to = "date",
values_to = "active_listings")
df.c <-
df |>
dplyr::filter(grepl("Chicago", RegionName)) |>
tidyr::pivot_longer(`2018-01-31`:`2021-09-30`,
names_to = "date",
values_to = "active_listings") |>
mutate(date = as.Date(date, format = "%Y-%m-%d"))
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line()
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line() +
labs(title = "Chicago Monthly Listings")
?labs
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line() +
labs(title = "Chicago Monthly Listings") +
scale_y_continuous(name = "homes")
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line() +
labs(title = "Chicago Monthly Listings") +
scale_y_continuous(name = "homes") +
scale_x_date(name = "")
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line() +
labs(title = "Chicago Monthly Listings") +
scale_y_continuous(name = "homes",
limits = c(0, 7e4)) +
scale_x_date(name = "")
df.c |>
ggplot2::ggplot() +
aes(date, active_listings) +
geom_line() +
labs(title = "For-Sale Inventory -- Chicago IL") +
scale_y_continuous(name = "unique listings",
limits = c(0, 7e4)) +
scale_x_date(name = "")
df <- readr::read_csv(file = 'https://files.zillowstatic.com/research/public_csvs/zori/Metro_ZORI_AllHomesPlusMultifamily_SSA.csv?t=1636157987')
df.c <-
df |>
dplyr::filter(SizeRank %in% c(0:6)) |>
tidyr::pivot_longer(`2014-01`:`2021-09`, names_to = "date", values_to = "rent") |>
mutate(date = paste0(date, "-01")) |>
mutate(date = as.Date(date, format = "%Y-%m-%d")) |>
mutate(RegionName = gsub("-Long Beach-Anaheim",
"",
RegionName)
)|>
mutate(RegionName = gsub("-Fort Worth", "", RegionName))
unique(df.c$RegionName)
p <- ggplot2::ggplot(df.c, aes(date, rent, color = RegionName)) +
geom_line() +
scale_y_continuous(limits = c(1000, 2000))
plotly::ggplotly(p)
dir.create("../tutorial_fredr")
setwd("../tutorial_fredr/")
library(fredr)
install.packages("fredr")
?fredr
library(fredr)
?fredr
vignette(package = "fredr")
vignette(package = "fredr", "fredr")
?Sys.getenv
Sys.getenv("FRED_API_KEY")
fredr(
series_id = "UNRATE",
observation_start = as.Date("1990-01-01"),
observation_end = as.Date("2000-01-01")
)
fredr(
series_id = "UNRATE",
observation_start = as.Date("1990-01-01"),
observation_end = as.Date("2000-01-01"),
frequency = "q", # quarterly
units = "chg" # change over previous value
)
?fredr
fredr(
series_id = "WEI",
observation_start = as.Date("1990-01-01"),
observation_end = as.Date("2000-01-01")
)
fredr(
series_id = "UNRATE",
observation_start = as.Date("1990-01-01"),
observation_end = as.Date("2000-01-01")
)
Sys.Date()
as.Date(Sys.Date())
fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05")
observation_end = as.Date(Sys.Date())
)
fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05"),
observation_end = as.Date(Sys.Date())
)
fredr_request(
series_id = "WEI",
observation_start = as.Date("2008-01-05"),
observation_end = as.Date(Sys.Date())
)
fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05"),
observation_end = as.Date(Sys.Date())
)
#Sys.getenv("FRED_API_KEY")
fredr::fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05"),
observation_end = as.Date(Sys.Date())
)
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05"),
observation_end = as.Date(Sys.Date())
)
str(df)
View(df)
?fredr::fredr
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI"#,
#        observation_start = as.Date("2008-01-05"),
#        observation_end = as.Date(Sys.Date())
)
rm(df)
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI"#,
#        observation_start = as.Date("2008-01-05"),
#        observation_end = as.Date(Sys.Date())
)
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI"
)
rm(df)
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI"
)
str(df)
?saveRDS
saveRDS(df, file = "./")
?fredr::fredr
#Sys.getenv("FRED_API_KEY")
df <- fredr::fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05")
)
?saveRDS
saveRDS(df, file = "./hello.RDS")
#Sys.getenv("FRED_API_KEY")
wei <- fredr::fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05")
)
saveRDS(wei, file = "./wei.RDS")
wei <- readRDS(wei)
wei <- readRDS("./wei.RDS")
wei |>
ggplot2::ggplot() +
aes(date, value, group = "series_id") +
geom_line()
gdp <- fredr::fredr(
series_id = "GDP",
observation_start = as.Date("2008-01-05")
)
saveRDS(gdp, file = "./gdp.RDS")
wei <- readRDS("./wei.RDS")
gdp <- readRDS("./gdp.RDS")
df <- dplyr::bind_rows(wei, gdp)
p <-
df |>
ggplot2::ggplot() +
aes(date, value, group = "series_id") +
geom_line()
p
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = "series_id"))
p
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = series_id))
p
#plot
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = series_id))
#get
#Sys.getenv("FRED_API_KEY")
wei <- fredr::fredr(
series_id = "WEI",
observation_start = as.Date("2008-01-05")
)
saveRDS(wei, file = "./wei.RDS")
df <- readRDS("./wei.RDS")
#plot
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = series_id))
#plot
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = series_id)) +
labs(title = unique(df$series_id))
p
?ggsave
file.name <- './plot_wei.jpg'
filename <- './plot_wei.jpg'
df <- readRDS("./wei.RDS")
#plot
p <-
df |>
ggplot2::ggplot() +
aes(date, value) +
geom_line(aes(group = series_id)) +
labs(title = unique(df$series_id))
p
filename <- './plot_wei.jpg'
ggplot2::ggsave(filename = filename,
p,
width = 6,
height = 4,
units = "in"
)
dir.create("./plots")
dir.create("./R")
dir.create("./data")
source("~/Dropbox/coding/rproj/tutorial_fredr/fetch_wei.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/fetch_wei.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/plot_wei.R", echo=TRUE)
dev.off()
source("~/Dropbox/coding/rproj/tutorial_fredr/R/plot_wei.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/plot_wei.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/plot_wei.R", echo=TRUE)
url <- "http://data.nber.org/data/cycles/20210719_cycle_dates_pasted.csv"
url <- "http://data.nber.org/data/cycles/20210719_cycle_dates_pasted.csv"
?readr::read_csv
file <- "http://data.nber.org/data/cycles/20210719_cycle_dates_pasted.csv"
df <- readr::read_csv(file = file)
date <- Sys.Date()
file <- paste0(date, "./data/nber_gdp.RDS")
date
file <- paste0("./data/", date, "nber_gdp.RDS")
file
file <- paste0("./data/", date, "_nber_gdp.RDS")
file
file
source("~/Dropbox/coding/rproj/tutorial_fredr/R/fetch_recession.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/fetch_recession.R", echo=TRUE)
date <- Sys.Date()
file <- paste0("./data/", date, "_wei.RDS")
file
source("~/Dropbox/coding/rproj/tutorial_fredr/R/fetch_wei.R", echo=TRUE)
source("~/Dropbox/coding/rproj/tutorial_fredr/R/fetch_wei.R", echo=TRUE)
grep("nber_rec", list.files(full.names = T))
grep("nber_rec", list.files(path = "./data/", full.names = T))
grep("nber_rec", list.files(path = "./data/", full.names = T), value = T)
?readRDS
file <- grep("nber_rec", list.files(path = "./data/", full.names = T), value = T)
file
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
file
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
file
df <- readRDS(file = file)
df <- readRDS(file = file)
View(df)
ggplot2::ggplot(df, aes(date, aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
)
)
) +
geom_rect()
ggplot2::ggplot(df, aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
)
)
geom_rect(fill = 'pink')
ggplot2::ggplot(df, aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
)
) +
geom_rect(fill = 'pink')
df <- readRDS(file = file)
ggplot2::ggplot(df, aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
)
) +
geom_rect(fill = 'pink')
recession <- readRDS(file = file)
df <- readRDS("./data/2021-11-06_fred_wei.RDS")
wei <- readRDS("./data/2021-11-06_fred_wei.RDS")
ggplot2::ggplot(wei, aes(date, value)) +
geom_rect(aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
),fill = 'pink')
ggplot2::ggplot(wei, aes(date, value)) +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
),fill = 'pink')
ggplot2::ggplot(wei, aes(date, value)) +
geom_line() +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf
),fill = 'pink')
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
p
p1
p1 <- p +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink')
p1
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
p
recession$value <- 0
wei <- readRDS("./data/2021-11-06_fred_wei.RDS")
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
p
p1 <- p +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink')
p1
p1 <- p +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink',
alpha = .2)
p1
p1 <- p +
geom_rect(data = recession,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink',
alpha = .3)
p1
min(wei$date)
recessions.trim <-
recession |>
dplyr::filter(peak <= min(wei$date))
View(recessions.trim)
recessions.trim <-
recession |>
dplyr::filter(peak >= min(wei$date))
View(recessions.trim)
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
recession <- readRDS(file = file)
recession$value <- 0
wei <- readRDS("./data/2021-11-06_fred_wei.RDS")
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
recession <- readRDS(file = file)
recession$value <- 0
recession.trim <-
recession |>
dplyr::filter(peak >= min(wei$date))
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
wei <- readRDS("./data/2021-11-06_fred_wei.RDS")
recession <- readRDS(file = file)
recession$value <- 0
recession.trim <-
recession |>
dplyr::filter(peak >= min(wei$date))
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
p
p1 <- p +
geom_rect(data = recession.trim
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink',
alpha = .3)
p1
wei <- readRDS("./data/2021-11-06_fred_wei.RDS")
file <- grep("nber_rec", list.files(path = "./data", full.names = T), value = T)
recession <- readRDS(file = file)
recession$value <- 0
recession.trim <-
recession |>
dplyr::filter(peak >= min(wei$date))
p <- ggplot2::ggplot(wei, aes(date, value)) +
geom_line()
p
p1 <- p +
geom_rect(data = recession.trim,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink',
alpha = .3)
p1
str(wei)
p1 <- p + geom_rect(data = recession.trim,
aes(xmin = peak,
xmax = trough,
ymin = -Inf,
ymax = +Inf),
fill = 'pink',
alpha = .3)
p1
library(fredr)
detach("package:fredr", unload = TRUE)
