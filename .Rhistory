df.1$lbs_per_sq_mi <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_sq_mi, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
df.1 <-
df %>%
#na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(grand_total, na.rm = T))
df.sa <- data.frame(lake = c("Michigan",
"Erie",
"Huron",
"Superior",
"Saint Clair",
"Ontario"
),
sa = c("22300",
"9910",
"23000",
"31700",
"430",
"7340"
),
stringsAsFactors = F
)
df.sa$sa <- as.integer(df.sa$sa)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$lbs_per_sq_mi <- round((df.1$total / df.1$sa), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, lbs_per_sq_mi, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~pounds/mile^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
?knitr::include_app
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
#clean species field
df$species <- tolower(df$species)
#american eel
df$species <- gsub("amercian", "american", df$species)
# bullhead and channel cats
df$species <- gsub("bullhead$", "bullheads", df$species)
df$species <- gsub(" and bullheads", "", df$species)
#chubs
df$species <- gsub("chub$", "chubs", df$species)
#crappies
df$species <- gsub("crappies", "crappie", df$species)
df$species <- gsub(" and crappie", "", df$species)
#drum
df$species <- gsub("freshwater ", "", df$species)
#lake trout
df$species <- gsub(" - siscowet", "", df$species)
#walleye aka blue pike was actually a walleye
df$species <- gsub(" and blue pike", "", df$species)
df$species <- gsub("blue pike", "walleye", df$species)
#lake sturgeon
df$species <- gsub("lake sturgeon", "sturgeon", df$species)
#salmon
df$species <- gsub("chinook |coho |pacific ", "", df$species)
#cisco and chubs
df$species <- gsub(" and chubs", "", df$species)
#channel catfish
df$species <- gsub("channel ", "", df$species)
#northern pike
df$species <- gsub("northern ", "", df$species)
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_app("https://rob-wiederstein.shinyapps.io/fish-app/", height = "800px")
#clean species field
df$species <- tolower(df$species)
#american eel
df$species <- gsub("amercian", "american", df$species)
# bullhead and channel cats
df$species <- gsub("bullhead$", "bullheads", df$species)
df$species <- gsub(" and bullheads", "", df$species)
#chubs
df$species <- gsub("chub$", "chubs", df$species)
#crappies
df$species <- gsub("crappies", "crappie", df$species)
df$species <- gsub(" and crappie", "", df$species)
#drum
df$species <- gsub("freshwater ", "", df$species)
#lake trout
df$species <- gsub(" - siscowet", "", df$species)
#walleye aka blue pike was actually a walleye
df$species <- gsub(" and blue pike", "", df$species)
df$species <- gsub("blue pike", "walleye", df$species)
#lake sturgeon
df$species <- gsub("lake sturgeon", "sturgeon", df$species)
#salmon
df$species <- gsub("chinook |coho |pacific ", "", df$species)
#cisco and chubs
df$species <- gsub(" and chubs", "", df$species)
#channel catfish
df$species <- gsub("channel ", "", df$species)
#northern pike
df$species <- gsub("northern ", "", df$species)
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_app("https://rob-wiederstein.shinyapps.io/fish-app/", height = "800px")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, grand_total) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-grand_total) %>%
select(year, lake, species, kg) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
df.1 <-
df %>%
#na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(kg, na.rm = T))
View(df.1)
df.sa <- tibble(lake = c("Erie",
"Huron",
"Michigan",
"Ontario",
"Saint Clair",
"Superior"
),
sa_km = c(25655,
59565,
57753,
19009,
1100,
82097)
)
df.sa <- tibble(lake = c("Erie",
"Huron",
"Michigan",
"Ontario",
"Saint Clair",
"Superior"
),
sa_km = c(25655,
59565,
57753,
19009,
1100,
82097)
)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$kg <- df.1$total * .45359237
df.1$kg_per_km_sq <- round((df.1$kg / df.1$sa_km), 2)
df.1 <-
df %>%
#na.omit() %>%
group_by(year, lake) %>%
summarize(total = sum(kg, na.rm = T))
df.sa <- tibble(lake = c("Erie",
"Huron",
"Michigan",
"Ontario",
"Saint Clair",
"Superior"
),
sa_km = c(25655,
59565,
57753,
19009,
1100,
82097)
)
df.1 <- dplyr::left_join(df.1, df.sa, by = "lake")
df.1$kg <- df.1$total * .45359237
df.1$kg_per_km_sq <- round((df.1$kg / df.1$sa_km), 2)
#df.1$lake <- stringr::str_sub(df.1$lake, start = 1, end = 5)
df.1$lake <- factor(df.1$lake, levels = c("Erie", "Michigan", "Saint Clair", "Huron",  "Ontario", "Superior"))
library(ggplot2)
p <- ggplot(df.1, aes(year, kg_per_km_sq, color = lake))
p <- p + geom_line(lwd = 1)
# p <- p + scale_y_continuous(name = "",
#                             breaks = c(0, 2000, 4000, 6000),
#                             labels = c("0", "2k", "4k", "6k")
#                             )
p <- p + scale_x_continuous(name = "")
p <- p + facet_grid(rows = vars(lake))
p <- p + labs(title = "Great Lakes Commercial Fish Catch",
subtitle = expression(~kg/km^2),
caption = "Great Lakes Fishery Commission--2018"
)
p <- p + ggthemes::theme_fivethirtyeight()
p <-  p + theme(legend.position = "none",
plot.subtitle = element_text(size = 16)
)
p
blogdown::serve_site()
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-kg) %>%
select(year, lake, species, kg) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
arrange(-kg) %>%
select(year, lake, species, kg) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) #%>%
# arrange(-kg) %>%
# select(year, lake, species, kg) %>%
# slice_head(n = 10) %>%
# kableExtra::kbl() %>%
# kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg)
# arrange(-kg) %>%
# select(year, lake, species, kg) %>%
# slice_head(n = 10) %>%
# kableExtra::kbl() %>%
# kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
arrange(-kg)
# arrange(-kg) %>%
# select(year, lake, species, kg) %>%
# slice_head(n = 10) %>%
# kableExtra::kbl() %>%
# kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
arrange(-kg) %>%
slice_head(n = 10)
# arrange(-kg) %>%
# select(year, lake, species, kg) %>%
# slice_head(n = 10) %>%
# kableExtra::kbl() %>%
# kableExtra::kable_styling(position = "center")
df$kg <- round(df$kg)
df$kg <- round(df$kg, digits = 1)
df$kg <- round(df$kg, 1)
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_app("https://rob-wiederstein.shinyapps.io/fish-app/", height = "800px")
df$kg
df$kg <- round(df$kg, 1)
df$kg
df[, 5] <- round(df[, 5], 1)
library(magrittr)
library(dplyr)
df[, 5] <- round(df[, 5], 1)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
arrange(-kg) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
## Load frequently used packages for blog posts
packages <- c(
'devtools', #for session info
'ggthemes', #for plots
'blogdown',
'dplyr',
'forcats',
'shiny'
)
lapply(packages, function(x) {
if (!requireNamespace(x)) install.packages(x)
library(x, character.only = TRUE)
})
## Do not break chunk line
## Do not use spaces or periods "." or underscores "_"
## set options for knitr
knitr::opts_chunk$set(
comment = '',
fig.width = 6,
fig.asp = .8,
fig.align="center",
message=F,
error=F,
warning=F,
tidy=T,
comment='',
cache=T,
dev='svg',
echo=F
)
#from ggthemes
library(ggplot2); theme_set(ggthemes::theme_fivethirtyeight())
# color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "#000000")
# write packages used to bib in current directory
knitr::write_bib(.packages(), "./packages.bib")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
knitr::include_app("https://rob-wiederstein.shinyapps.io/fish-app/", height = "800px")
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
View(df)
df[2550, ]
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
arrange(-kg) %>%
slice_head(n = 10) %>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
library(magrittr)
library(dplyr)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
arrange(-kg) %>%
slice_head(n = 10) #%>%
kableExtra::kbl() %>%
kableExtra::kable_styling(position = "center")
blogdown::serve_site()
input <- "/Users/robwiederstein/Dropbox/public/datasets/glfc-great-lakes-comm-fish-catch-1867-2015.csv"
df <- data.table::fread(input = input)
df %>%
filter(year = max(year))
df %>%
dplyr::filter(year = max(year))
dplyr::filter(year == max(year)
df %>%
df %>% dplyr::filter(year == max(year))
df %>%
dplyr::filter(year == max(year))
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
mutate(kg = round(kg, 2))
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
mutate(kg = round(kg, 2)) %>%
arrange(-kg)
df %>%
dplyr::filter(year == max(year)) %>%
select(year, lake, species, kg) %>%
mutate(kg = round(kg, 2)) %>%
arrange(-kg) %>%
slice_head(n = 10)
